<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

    <title>Introduzione</title>
    <link rel="stylesheet" type="text/css" href="style.css" />

    <script src="libraries/p5.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
  </head>

  <body>

    <div class="box" style="padding: 0.5%">
      <div id="ascicanvas1" ></div>

      <div class="mySlides" style="max-width: 90%;">
        <h1 style="font-size: 80pt; line-height: 90%; color: black; position: relative; z-index: 10; margin-bottom: 30px;">Just <br> a chat</h1>
        <p style="font-size: 30pt; line-height: 100%; color: black; position: relative; z-index: 10"> But offline and you are the clients and the server </p>
      </div>

      <div class="mySlides">
        We send messages everyday but we ignore the complexity of this action.
        All the messaging apps work thanks to the Client–Server model.
      </div>

      <div class="mySlides">
        Clients are the computers that users use to communicate with each other
        through the server.
      </div>

      <div class="mySlides">
        The server is the computer the brings the message from a client to one
        other.
      </div>

      <div class="mySlides">
        The first client packages up his message and asks the server to take it.
        The second client asks the server to receive it and so on.
      </div>

      <div class="mySlides">
        There are two to four clients and only one server. <br />
        Arrange yourself according to the colors on the floor.
      </div>

    </div>


    
    <div class="about-container">
      <h1>A project by:<br>
       Federico Bobbo <br> Franceso Bonetti <br> Sarah Cosentino<br> Matteo Dell'Agostino <br>  Enrico Isidori<br><br>
      Creative Coding 2022/2023<br>
Politecnico di Milano <br> Scuola del Design <br> Communication Design<br><br>
Faculty:<br> Michele Mauri <br> Andrea Benedetti<br> Tommaso Elli
    
    </h1>
      <div class="nav-placeholder"></div>
      <a class="closeabout" onclick="closeAbout()">Close</a>
    </div>

    <div class="bottomnav">
      <a class="openabout" onclick="openAbout()">About</a>
      <a class="prev" onclick="plusSlides(-1)">Previous</a>
      <a class="next" onclick="plusSlides(1)">Next</a>
      <a class="enter-room-button">Join</a>
    </div>

    <script src="sketch.js"></script>


<!-- *************************** CODICE ASCII *************************** -->

<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

<script type="importmap">
{
  "imports": {
    "three": "../node_modules/three/build/three.module.js",
    "three/addons/": "./jsm/"
  }
}
</script>

<script type="module">

import * as THREE from "three";

import { AsciiEffect } from "three/addons/effects/AsciiEffect.js";
import { PolyhedronGeometry } from "./node_modules/three/src/geometries/PolyhedronGeometry.js";

document.querySelector(".next").addEventListener("click", animazioneStart);
document.querySelector(".prev").addEventListener("click", riduciStart);



let camera, scene, renderer;
let cameraTarget = new THREE.Vector3(0, 0, 0);
let effect = [];
let sphere;
const start = Date.now();

let directionalLight1;
let directionalLight2;
let a = 0;
let facceStart = 5;
let raggioStart = 400;
 
init()
sphere = new THREE.Mesh(
     new THREE.TetrahedronGeometry(raggioStart, facceStart),
     new THREE.MeshPhongMaterial({ color: "green", flatShading: true })
     );
     sphere.name = "sphere";
     sphere.receiveShadow = true;
     sphere.castShadow = true;
     scene.add(sphere);


function animazioneStart() {
  console.log("AAA");
  a += 1;

    facceStart -= 1;
    raggioStart -= 100;

        document.getElementById("ascicanvas1").removeChild(effect[a - 1].domElement);
    init();
    
    sphere = new THREE.Mesh(
            new THREE.TetrahedronGeometry(raggioStart, facceStart),
            new THREE.MeshPhongMaterial({ color: "green", flatShading: true })
          );
          sphere.name = "sphere";
          sphere.receiveShadow = true;
          sphere.castShadow = true;
          scene.add(sphere);
    }

function riduciStart() {

  facceStart += 1;
  raggioStart += 80;
  sphere = new THREE.Mesh(
            new THREE.TetrahedronGeometry(raggioStart, facceStart),
            new THREE.MeshPhongMaterial({ color: "green", flatShading: true })
          );
          sphere.name = "sphere";
          sphere.receiveShadow = true;
          sphere.castShadow = true;
          scene.add(sphere);

  
    }



function init() {
  camera = new THREE.PerspectiveCamera(100, window.innerWidth / window.innerHeight, 1, 1000);
  //camera.position.y = 150;
  camera.position.x = 500;

  scene = new THREE.Scene();
  //scene.background = new THREE.Color( 0xff0000 );

  lights();

  renderer = new THREE.WebGLRenderer({ alpha: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  //renderer.setClearColor( 0xffffff, 0);

  effect.push(new AsciiEffect(renderer, "8@#4ù=_. ", { invert: true }));
  effect[a].setSize(window.innerWidth, window.innerHeight);
  effect[a].domElement.style.color = "black";
  //effect[a].domElement.style.backgroundColor = 'white';

  // Special case: append effect.domElement, instead of renderer.domElement.
  // AsciiEffect creates a custom domElement (a div container) where the ASCII elements are placed.
  document.getElementById("ascicanvas1").appendChild(effect[a].domElement);
  window.addEventListener("resize", onWindowResize);
  animate();
}

function onWindowResize() {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();

  renderer.setSize(window.innerWidth, window.innerHeight);
  effect[a].setSize(window.innerWidth, window.innerHeight);
}

function animate() {
  requestAnimationFrame(animate);
  render();
}

function render() {
  const timer = Date.now() - start;
  camera.lookAt(cameraTarget);
  //camera.rotation.x = timer * 0.0008;
  scene.rotation.y = timer * 0.0005;

  effect[a].render(scene, camera);
}

function lights() {
  directionalLight1 = new THREE.DirectionalLight(0xffffff);
  directionalLight1.position.set(10, 40, 200);
  directionalLight1.intensity = 10;
  scene.add(directionalLight1);

  directionalLight2 = new THREE.DirectionalLight(0xffffff);
  directionalLight2.position.set(-500, -1000, -200);
  scene.add(directionalLight2);
}
</script>
  </body>
</html>
